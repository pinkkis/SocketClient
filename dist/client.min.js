!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function c(e,t,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new s(n,o||e,i),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],c]:e._events[u].push(c):(e._events[u]=c,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,o,i,s){var c=r?r+e:e;if(!this._events[c])return!1;var u,a,l=this._events[c],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,i),!0;case 6:return l.fn.call(l.context,t,n,o,i,s),!0}for(a=1,u=new Array(f-1);a<f;a++)u[a-1]=arguments[a];l.fn.apply(l.context,u)}else{var p,h=l.length;for(a=0;a<h;a++)switch(l[a].once&&this.removeListener(e,l[a].fn,void 0,!0),f){case 1:l[a].fn.call(l[a].context);break;case 2:l[a].fn.call(l[a].context,t);break;case 3:l[a].fn.call(l[a].context,t,n);break;case 4:l[a].fn.call(l[a].context,t,n,o);break;default:if(!u)for(p=1,u=new Array(f-1);p<f;p++)u[p-1]=arguments[p];l[a].fn.apply(l[a].context,u)}}return!0},a.prototype.on=function(e,t,n){return c(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return c(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return u(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||u(this,i);else{for(var c=0,a=[],l=s.length;c<l;c++)(s[c].fn!==t||o&&!s[c].once||n&&s[c].context!==n)&&a.push(s[c]);a.length?this._events[i]=1===a.length?a[0]:a:u(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";n.r(t);var o=n(0);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return f});var l={host:"localhost",port:3e3,secure:!1,autoconnect:!0,reconnect:!0,debug:!0},f=function(e){function t(e){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=s(t).call(this))||"object"!==r(i)&&"function"!=typeof i?u(o):i,a(u(u(n)),"options",void 0),a(u(u(n)),"socket",void 0),a(u(u(n)),"clientId",void 0),a(u(u(n)),"reconnecting",void 0),a(u(u(n)),"beforeunloadEventSet",void 0),a(u(u(n)),"binaryType",void 0),n.reconnecting=!1,n.beforeunloadEventSet=!1,n.socket=null,n.clientId=null,n.options=e?Object.assign(l,e):l,n.options.autoconnect&&n.connect(),n}var n,f,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,o),n=t,(f=[{key:"connect",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!this.socket||n?(this.socket=null,this.socket=new WebSocket((e=this.options,"".concat(e.secure?"wss":"ws","://").concat(e.host).concat(e.port?":":"").concat(e.port))),this.binaryType=this.socket.binaryType,this.socket.addEventListener("message",function(e){t.onSocketMessage(e)}),this.socket.addEventListener("error",function(e){t.onError(e)}),this.socket.addEventListener("open",function(e){t.onConnect(e)}),this.socket.addEventListener("close",function(e){t.onDisconnect(e)})):console.warn("SocketClient already connected"),this.beforeunloadEventSet||(window.addEventListener("beforeunload",function(){t.socket&&t.socket.readyState===WebSocket.OPEN&&(t.socket.close(1001,"client terminated"),t.clientId=null)}),this.beforeunloadEventSet=!0)}},{key:"disconnect",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.options.reconnect=!1),this.socket.close(1e3,"client disconnecting")}},{key:"send",value:function(e){var t=e instanceof ArrayBuffer||e instanceof Blob;this.socket&&this.status===WebSocket.OPEN&&(t?this.socket.send(e):this.socket.send(JSON.stringify(e))),this.emit("send")}},{key:"messageHandler",value:function(e,t){this.emit("message",t),this.emit("stringMessage",t)}},{key:"binaryMessageHandler",value:function(e){this.emit("message",e.data),this.emit("binaryMessage",e.data)}},{key:"onSocketMessage",value:function(e){if("string"==typeof e.data)this.binaryMessageHandler(e);else{var t=JSON.parse(e.data);"clientid"===t.type?this.onClientId(e,t):"ping"===t.type?this.onPing(e,t):this.messageHandler(e,t)}}},{key:"onConnect",value:function(e){this.emit("connect",e),this.reconnecting&&(this.onReconnect(),this.reconnecting=!1),this.options.debug&&console.log("SocketClient connect",e)}},{key:"onDisconnect",value:function(e){this.emit("disconnect",e),this.options.debug&&console.log("SocketClient disconnect",e),this.socket=null,this.options.reconnect&&this.connect()}},{key:"onReconnect",value:function(){this.emit("reconnect")}},{key:"onError",value:function(e){this.emit("error",e),console.error("SocketClient error",e)}},{key:"onClientId",value:function(e,t){this.clientId=t.message.id,this.emit("clientId",this.clientId),console.log("SocketClient - clientId",this.clientId)}},{key:"onPing",value:function(e,t){this.emit("ping",t.message),this.send({type:"pong",message:t.message}),this.options.debug&&console.log("SocketClient - ping")}},{key:"status",get:function(){return this.socket?this.socket.readyState:WebSocket.CLOSED}}])&&i(n.prototype,f),p&&i(n,p),t}()}]);